{% extends "core/base.html" %}
{% block title %}Latest News{% endblock %}
{% block content %}
  <div class="card">
    <h1>Latest News (BZ Basel)</h1>
    <p class="muted">Feed: https://www.bzbasel.ch/basel.rss</p>
    {% if user.is_authenticated %}
      <p><a class="btn" href="{% url 'news_refresh' %}">Refresh Now (login required)</a></p>
    {% endif %}
  </div>

  {% for item in items %}
    <div class="card">
      <h3><a href="{{ item.link }}" target="_blank" rel="noopener">{{ item.title }}</a></h3>
      {% if item.published %}<div class="muted">{{ item.published|date:"Y-m-d H:i" }}</div>{% endif %}
      <p>{{ item.summary|safe }}</p>
      <div class="muted">Source: {{ item.source }}</div>
    </div>
  {% empty %}
    <div class="card">No news yetâ€”try refreshing.</div>
  {% endfor %}

  <div class="card">
    <div>
      {% if items.has_previous %}
        <a class="btn btn-outline" href="?page={{ items.previous_page_number }}">Previous</a>
      {% endif %}
      <span class="muted">Page {{ items.number }} of {{ items.paginator.num_pages }}</span>
      {% if items.has_next %}
        <a class="btn btn-outline" href="?page={{ items.next_page_number }}">Next</a>
      {% endif %}
    </div>
  </div>
{% endblock %}
